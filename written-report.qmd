---
title: "Project Proposal"
author: "JRLK - Jess Ringness, Rebekah Kim, Laura Cai, Karen Dong"
format: pdf
execute: 
  warning: false
  message: false
editor: visual
---

```{r}
#| label: load-pkg-data
#| message: false
#| echo: false
library(tidyverse)
library(tidymodels)
library(knitr)
library(patchwork)
library(janitor)
job_postings <-read.csv("data/job_postings.csv")
benefits <-read.csv("data/benefits.csv")
employee <-read.csv("data/employee_counts.csv")
```

```{r manipulating_benefits}
#| echo: false
benefits <- benefits |>
  select(-inferred) |>
  mutate(count = 1) |>
  pivot_wider(names_from = "type", values_from = "count") |>
  clean_names()
```

```{r}
benefits <- replace(benefits, is.na(benefits), 0)
benefits
```


```{r}
benefits <- replace(benefits, is.na(benefits), 0)
benefits$tot_benefits <- rowSums(benefits == 1)
benefits_total <- benefits[, c('job_id', 'tot_benefits')]
```

```{r joining_jobs_employee}
#| echo: false
jobs_employee <- job_postings |>
  left_join(employee, by = join_by("company_id"))
```

```{r joining_final_set}
#| echo: false
linkedin <- jobs_employee |>
  left_join(benefits_total, by = join_by("job_id"))

linkedin <- linkedin |> distinct(job_id, .keep_all = TRUE)
```



```{r}
linkedin_subset <- linkedin|>
  mutate(pay_period = recode(pay_period, YEARLY = 1/2080, HOURLY = 1, MONTHLY = 1/160)) |>
  mutate(hourly_max_salary = pay_period * max_salary) |>
  mutate(if_benefits = factor(ifelse(linkedin$tot_benefits > 0, "listed", "none"),
  levels = c("none", "listed"))) |>
  mutate(per_applies = applies/views) |>
  mutate(original_listed_time = as.POSIXct(original_listed_time/1000, origin = "1970-01-01", tz = "EST")) |>
  mutate(listed_time = as.POSIXct(listed_time/1000, origin = "1970-01-01", tz = "EST")) |>
  drop_na(hourly_max_salary) |>
  drop_na(per_applies) |>
  drop_na(follower_count) |>
  drop_na(formatted_experience_level) |>
  drop_na(remote_allowed)

linkedin_subset$hour_listed <- sapply(strsplit(as.character(linkedin_subset$original_listed_time), ' '), function(x) {
  time_parts <- unlist(strsplit(x[2], ':'))
  return(time_parts[1])
})

linkedin_subset
```
```{r}
library(ggplot2)
library(patchwork)
```

```{r}
salary_hist <- linkedin_subset |>
  ggplot(aes(x = hourly_max_salary)) + 
  geom_histogram()
```

```{r}
follower_hist <- linkedin_subset |>
  ggplot(aes(x = follower_count)) + 
  geom_histogram()
```

```{r}
hr_hist <- linkedin_subset |>
  ggplot(aes(x = as.numeric(hour_listed))) + 
  geom_histogram()
```

```{r}
salary_hist +follower_hist +hr_hist
```


```{r}
linkedin_subset |>
  ggplot(aes(x = hourly_max_salary, y = per_applies, color = formatted_experience_level)) +
  geom_point() +
  facet_wrap(~formatted_experience_level)
```
```{r}
sal_scat <- linkedin_subset |>
  ggplot(aes(x = hourly_max_salary, y = per_applies)) +
  geom_point()
```


```{r}
follow_scat <- linkedin_subset |>
  ggplot(aes(x = follower_count, y = per_applies)) +
  geom_point()
```

```{r}
hr_scat <- linkedin_subset |>
  ggplot(aes(x = hour_listed, y = per_applies)) +
  geom_point()
```

```{r}
sal_scat
```

```{r}
follow_scat
```

```{r}
hr_scat
```



```{r}
group <- linkedin_subset |>
  group_by(hour_listed) |>
  summarize(mean_per_applies = mean(per_applies))
```

```{r}
group$hour = as.numeric(group$hour_listed)
```


```{r}
group |>
  ggplot(aes(x = hour_listed, y = mean_per_applies)) +
  geom_col()
```
## Introduction

LinkedIn is a platform that connects companies, big and small, and professionals spanning various levels of experience. As a result of its growing popularity, there are thousands of active job postings available on LinkedIn, with more consistently added. Numerous variables may impact the popularity of a job posting -- an employer's goal is likely to attract more outreach on their job posting to attract more applicants, which could potentially lead to more qualified candidates to apply for their company's roles.

We are interested in exploring this topic because online job search services and platforms are now considered equally important for employees and employers accessing a wide variety of opportunities across the country compared to in-person job postings. However, this can mean that applicants are overwhelmed by the amount of options they have access to, and are less likely to come across or apply to individual postings. This problem creates a demand for services like Linkedin to monetize priority for some job postings over others, where it claims employers will "get 3x the amount of qualified applicants when \[they\] add a budget and promote \[their\] job post."

Our primary research question is - what factors about job postings increase popularity among applicants? Our hypothesis is that job postings associated with companies who are more established, invest more into hiring, and offer more benefits for employees will have greater popularity. These factors can be characterized by having followers and employees, monetizing the posting, allowing for flexibility in the job (measured by whether remote work is allowed or not), adding more benefits - such as higher salary, health benefits, etc., which will positively correlate with both the job's view count and the number of applicants.

## Data description

This data included in this set is sourced from linkedin.com, the website for LinkedIn. The creator of this data set, Arsh Koneru-Ansari, used Python to scrape data directly from linkedin.com and the scraper code is published in their GitHub (https://github.com/ArshKA/LinkedIn-Job-Scraper#jobs). The observations and general characteristics being measured through this data set are the number of applications for each job listing, the number of views for each job listing, the maximum salary rate, whether the job is remote or in-person, whether or not the listing is sponsored, the company's follower count on LinkedIn, the number of employees in the company, and the benefits associated with each job.

## Initial exploratory data analysis



Another potential interaction effect is the number of views and experience level. Different positions are more sought after on LinkedIn over others, depending on viewers' backgrounds. The number of applications increases per number of views for a position requiring associate experience increases at a more rapid rate than those for other positions, although all positions have some sort of impact associated with views and applications.

## Analysis approach

A linear regression model is fitting for this prediction, as the number of applications for a listing is a numerical variable. The number of views the post received, the maximum salary of the position, the number of benefits provided by the job, the number of followers the company has, the number of employees the company had at the time of listing, if remote working is permitted, and the location of the job as metropolitan or rural could be used as potential useful predictors of the amount of applications for a job on a LinkedIn job listing. These variables include views, employee_count, remote_allowed, follower_count, max_salary multiplied by the period in pay_period to find annual pay, benefits manipulated to be a categorical variable, and location manipulated to be a categorical variable.

## Data dictionary

The data dictionary can be found [here](https://docs.google.com/document/d/15LOwqM0wwdBLOcGvvohmnEjVNeWslftThWEikwoEWNo/edit?usp=sharing).
